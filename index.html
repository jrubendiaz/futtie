<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <a href='javascript:function init(){var pr=document.createElement("div");pr.style.backgroundColor="white",pr.style.color="black",pr.style.padding="12px",pr.style.fontSize="10px",pr.style.position="fixed",pr.style.top="0",pr.style.left="150px",pr.style.height="400px",pr.style.width="320px",pr.style.overflowY="scroll",pr.style.opacity="0.8";const HOW_MANY_REQUEST_PER_ROUND=35,HOW_MANY_ROUNDS_PER_CYCLE=5,MIN_WAIT_PER_ROUND=15e3,MAX_WAIT_PER_ROUND=3e4,MIN_WAIT_PER_CYCLE=6e4,MAX_WAIT_PER_CYCLE=12e4,MAX_MIN_BID=500,CHEM_STYLES={NORMAL:".playStyle.chemstyle250"},ELEMENT_SELECTOR={DIALOG:".ea-dialog-view",PLAYER:{SELECTED_ITEM_LIST:{MAIN:".listFUTItem.has-auction-data.selected",IMAGE:".player.item.small",PRIZE:".auctionValue .value",NAME:".name"}}},SEARCH_ITEM_RESPONSES={OK:"OK",KO:"KO",TIMEOUT:"DOWN"},dispatchClick=e=>{triggerMouseEvent(e,"mouseover"),triggerMouseEvent(e,"mousedown"),triggerMouseEvent(e,"mouseup"),triggerMouseEvent(e,"click")},triggerMouseEvent=async(e,t)=>{try{var l=document.createEvent("MouseEvents");l.initEvent(t,!0,!0),e.dispatchEvent(l)}catch(s){}};function sleep(e){return setClock(e),new Promise(t=>setTimeout(t,e))}const getRandomSleep=(e,t)=>Math.floor(Math.random()*(e-t+1)+t),getPlayerInfo=e=>{let t=e.querySelectorAll(ELEMENT_SELECTOR.PLAYER.SELECTED_ITEM_LIST.PRIZE),l=t[t.length-1],s=e.querySelector(ELEMENT_SELECTOR.PLAYER.SELECTED_ITEM_LIST.NAME);return{buyNowPrize:l,name:s}},getPlayerInfoElement=({buyNowPrize:e,name:t,status:l})=>{let s=document.createElement("div");s.style.display="flex",s.style.justifyContent="center",s.style.alignItems="center",s.style.fontSize="18px",s.style.color="#333",s.style.borderColor="OK"===l?"#BADA55":"red",s.style.borderWidth="2px",s.style.borderStyle="solid";let r=document.createElement("div");return r.display="flex",r.appendChild(t),r.appendChild(e),s.appendChild(r),s},navigateBackButton=()=>document.querySelector(".ut-navigation-button-control");let buyAttempts=0,boughtPlayers=0,intervals=[];var intervalAceptar=null,intervalItemClick=null,intervalErrorNotification=null,imageIntervals=[];const resetIntervals=()=>{intervals.forEach(e=>{clearInterval(e)}),intervals=[]};var clock=document.createElement("div");clock.style.backgroundColor="white",clock.style.color="black",clock.style.padding="12px",clock.style.fontSize="48px",clock.style.fontWeight="bold",clock.style.position="fixed",clock.style.top="0",clock.style.left="520px",clock.style.height="100px",clock.style.width="80px",clock.style.overflowY="scroll",clock.style.opacity="0.8",clock.style.display="flex",clock.style.justifyContent="center",clock.style.alignItems="center";var stats=document.createElement("div");stats.style.backgroundColor="white",stats.style.color="black",stats.style.padding="12px",stats.style.fontSize="16px",stats.style.fontWeight="bold",stats.style.position="fixed",stats.style.top="120px",stats.style.left="520px",stats.style.height="64px",stats.style.width="auto",stats.style.opacity="0.8",stats.style.display="flex",stats.style.justifyContent="center",stats.style.alignItems="center";const setClock=e=>{let t=e;clock.innerText=Math.round(t/1e3);let l=setInterval(()=>{t=t-100>=0?t-100:0,clock.innerText=Math.round(t/1e3),t<=0&&clearInterval(l)},100)},imageReady=()=>new Promise(e=>{imageIntervals=[...imageIntervals,setInterval(()=>{document.querySelector(".tns-slide-active .large.player.item.ut-item-loaded")&&e({item:document.querySelector(".tns-slide-active .large.player.item.ut-item-loaded")}),1===document.querySelectorAll(".large.player.item.ut-item-loaded").length&&e({item:document.querySelector(".large.player.item.ut-item-loaded")})},100)]}),buyIt=()=>{let e=!0,t=!1,l=!0;return buyAttempts++,stats.innerText=`Comprados ${boughtPlayers} de ${buyAttempts}`,new Promise(async s=>{intervalAceptar=setInterval(async()=>{let e=document.querySelector(".ea-dialog-view");if(e){let l=e.querySelectorAll("button")[0];if(l&&t){t=!1;try{dispatchClick(l),await sleep(500);let r=document.querySelector(".ut-quick-list-panel-view");if(r){boughtPlayers++,stats.innerText=`Comprados ${boughtPlayers} de ${buyAttempts}`;let o=getPlayerInfo(document.querySelector(ELEMENT_SELECTOR.PLAYER.SELECTED_ITEM_LIST.MAIN)),a=getPlayerInfoElement({...o,status:"OK"});pr.appendChild(a),s({response:"BUY_OK"})}}catch(n){}}}},5),intervals=[...intervals,intervalAceptar],intervalItemClick=setInterval(()=>{let l=document.querySelector(".buyButton");if(l&&e){t=!0,e=!1;try{intervalItemClick&&clearInterval(intervalItemClick),dispatchClick(l)}catch(s){}}},5),intervals=[...intervals,intervalItemClick],intervalErrorNotification=setInterval(async()=>{let e=document.querySelector("#NotificationLayer");if(e){await sleep(300);let t=e.querySelector(".icon_close");if(t&&l)try{intervalErrorNotification&&clearInterval(intervalErrorNotification),intervalAceptar&&clearInterval(intervalAceptar),intervalItemClick&&clearInterval(intervalItemClick),dispatchClick(t);let r=getPlayerInfo(document.querySelector(ELEMENT_SELECTOR.PLAYER.SELECTED_ITEM_LIST.MAIN)),o=getPlayerInfoElement({...r,status:"KO"});pr.appendChild(o),s({response:"BUY_KO"})}catch(a){}}},5),intervals=[...intervals,intervalErrorNotification]})};var intervalAtLeastOneItem=null,intervalNoResults=null,getResults=()=>{let e=!1,t=!1;return new Promise(l=>{setTimeout(()=>{e||t||l({response:SEARCH_ITEM_RESPONSES.TIMEOUT})},2e3),intervals=[...intervals=[...intervals,setInterval(()=>{let t=document.querySelectorAll(".listFUTItem");if(t&&t.length>0&&!e){e=!0;let s=t[t.length-1],r=s.querySelector(".rowContent");try{dispatchClick(r),clearInterval(intervalAtLeastOneItem),e=!0,l({response:SEARCH_ITEM_RESPONSES.OK})}catch(o){resetIntervals()}}},50)],setInterval(()=>{let e=document.querySelector(".ut-no-results-view");e&&!t&&(clearInterval(intervalNoResults),t=!0,l({response:SEARCH_ITEM_RESPONSES.KO}))},50)]})},decrease=!1,running=!0,request=0,rounds=0,roundClock=document.createElement("div");roundClock.style.backgroundColor="white",roundClock.style.color="black",roundClock.style.padding="12px",roundClock.style.fontSize="48px",roundClock.style.fontWeight="bold",roundClock.style.position="fixed",roundClock.style.top="0",roundClock.style.left="620px",roundClock.style.height="100px",roundClock.style.width="80px",roundClock.style.overflowY="scroll",roundClock.style.opacity="0.8",roundClock.style.display="flex",roundClock.style.justifyContent="center",roundClock.style.alignItems="center";const updateRequestsClock=()=>{roundClock.innerText=35-request,request++},buyHandler=async()=>{let e=await buyIt();if("BUY_OK"===e.response){let t=document.querySelector(".DetailPanel>.ut-button-group"),l=t.querySelectorAll("button")[7];resetIntervals(),dispatchClick(l),await sleep(200),dispatchClick(navigateBackButton()),search()}else if("BUY_KO"===e.response){let s=document.querySelector(".icon_close");s&&dispatchClick(s),resetIntervals(),await sleep(200),dispatchClick(navigateBackButton()),search()}};var search=async()=>{if(!running)return;let e=e=>document.querySelectorAll(".btn-standard")[e],t=()=>e(0),l=()=>e(1),s=()=>e(4),r=()=>e(5),o=()=>e(6),a=()=>e(7),n=e=>document.querySelectorAll(".ut-number-input-control")[e],i=()=>n(0),c=()=>document.querySelector(".btn-standard.call-to-action");if(request>35){let u=getRandomSleep(3e4,15e3);await sleep(u),request=0,rounds++,search();return}if(rounds>=5){let y=getRandomSleep(12e4,6e4);await sleep(y),rounds=0,search();return}updateRequestsClock(),i()?.value>500&&(decrease=!0),i()?.value==""&&(decrease=!1),dispatchClick(decrease?t():l()),await sleep(100),dispatchClick(request%4==0?r():s()),await sleep(100),dispatchClick(request%2==0?o():a()),dispatchClick(c()),await sleep(250);let{response:p}=await getResults();if(p===SEARCH_ITEM_RESPONSES.OK)setMessage("AT LEAST ONE RESULT"),buyHandler();else if(p===SEARCH_ITEM_RESPONSES.KO)try{dispatchClick(navigateBackButton()),search()}catch(d){}else if(p===SEARCH_ITEM_RESPONSES.TIMEOUT)try{resetIntervals(),dispatchClick(navigateBackButton())}catch(E){}};const searchAndBuy=async()=>{let e=()=>document.querySelector(".btn-standard.call-to-action");dispatchClick(e());let{response:t}=await getResults();if("CLICKED_RESULT"===t){let l=await buyIt();if("BUY_OK"===l.response){setMessage("Art\xedculo comprado!");let s=document.querySelector(".DetailPanel>.ut-button-group"),r=s.querySelectorAll("button")[7];dispatchClick(r),await sleep(200),dispatchClick(navigateBackButton()),search()}else if("BUY_KO"===l.response){let o=document.querySelector(".icon_close");o&&dispatchClick(o),setMessage("No ha sido posible comprar el art\xedculo"),await sleep(4e3),dispatchClick(navigateBackButton()),search()}}};var searchButton=document.createElement("button");searchButton.innerHTML="START",searchButton.style.width="120px",searchButton.style.backgroundColor="black",searchButton.style.color="white",searchButton.style.padding="12px",searchButton.style.position="fixed",searchButton.style.top="0",searchButton.style.right="0",searchButton.onclick=()=>{running=!0,search(),setMessage("Searching...")};var stopButton=document.createElement("button");stopButton.innerHTML="STOP",stopButton.style.width="120px",stopButton.style.backgroundColor="red",stopButton.style.color="white",stopButton.style.padding="12px",stopButton.style.position="fixed",stopButton.style.top="0",stopButton.style.right="240px",stopButton.onclick=()=>{running=!1;try{intervals.forEach(e=>{clearInterval(e)}),intervals=[],rounds=0,request=0,canClick=!1,canAccept=!1,canDismissNotification=!1,stop=!0}catch(e){setMessage("No pude parar los intervals")}setMessage("Stopping...")};const newElement=e=>{let t=document.createElement("div");return t.style.backgroundColor="#f3f3f3",t.style.color="black",t.style.padding="12px",t.style.fontSize="10px",t.style.height="auto",t.style.overflowY="scroll",t.style.borderColor="#333",t.style.borderWidth="1px",t.innerHTML=e,t},setMessage=e=>{};document.body.appendChild(searchButton),document.body.appendChild(stopButton),document.body.appendChild(pr),document.body.appendChild(clock),document.body.appendChild(roundClock),document.body.appendChild(stats);const minusPlusBtns=e=>document.querySelectorAll(".btn-standard")[e],minBidMinus=()=>minusPlusBtns(0),minBidPlus=()=>minusPlusBtns(1),buyNowMinMinus=()=>minusPlusBtns(4),buyNowMinPlus=()=>minusPlusBtns(5),buyNowMinus=()=>minusPlusBtns(6),buyNowPlus=()=>minusPlusBtns(7);document.addEventListener("keydown",e=>{let{code:t}=e;switch(t){case"Space":searchAndBuy();break;case"ArrowLeft":dispatchClick(buyNowMinPlus());break;case"ArrowRight":dispatchClick(buyNowMinMinus());break;case"ArrowUp":dispatchClick(buyNowPlus());break;case"ArrowDown":dispatchClick(buyNowMinus());break;case"ShiftRight":dispatchClick(navigateBackButton())}});} init()'>
        Snipping tool v.0.0.4
    </a>
</body>
</html>